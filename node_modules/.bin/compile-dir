#!/usr/bin/env bash
# Purpose: Compile files for website
# Author: Ben Keys
# --------------------------------------

files=`\
find . -type d \( -path 'node_modules' -o -path '.github' \) -prune -false -o -type f \
\( -name ".gitignore" -o -name "*.md" \) -o \
\( \( -name '*.scss' -not -name '_*.scss' \) -o \( -name '*.sass' -not -name '_*.sass' \) \)\
`

while read -r file; do
    case $file in

        # Files to remove
        ".gitignore" | *".md" )
            rm -rf "$file";;

        # Sass files
        *".scss" | *".sass" )
            if [[ $sass_run ]]; then
                rm -rf "$file"
            else
                sass .:. --embed-source-map
                rm -rf "$file"
                sass_run=0
            fi;;

    esac
done <<< "$files"