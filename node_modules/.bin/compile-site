#!/usr/bin/env bash
# Purpose: Compile files for website
# Author: Ben Keys
# --------------------------------------

files=`\
find . \( -path 'node_modules' -o -path '.github' \) -prune -false -o \
\( \( -name '*.scss' -not -name '_*.scss' \) -o \( -name '*.sass' -not -name '_*.sass' \) \)\
`

while read -r file; do
    case $file in
        *".scss" | *".sass" )
            if [[ $sass_run ]]; then
                git rm "$file"
                continue
            else
                sass .:. --embed-source-map
                git rm "$file"
                sass_run=0
            fi;;
    esac
done <<< "$files"